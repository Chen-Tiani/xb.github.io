{"version":3,"file":"static/js/518.5a5c4887.js","mappings":"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","sources":["webpack://ct/./src/components/Add/add.vue","webpack://ct/src/components/Add/add.vue","webpack://ct/./src/components/Add/add.vue?ff96","webpack://ct/./src/components/Add/add.vue?2b57"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"home\"},[_c('el-form',{ref:\"ruleForm\",staticClass:\"ruledemo-Form\",attrs:{\"model\":_vm.ruleForm,\"rules\":_vm.rules,\"label-width\":\"100px\",\"size\":\"mini\"}},[_c('el-form-item',{attrs:{\"label\":\"物品名称\",\"prop\":\"name\"}},[_c('el-input',{model:{value:(_vm.ruleForm.name),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"name\", $$v)},expression:\"ruleForm.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"物品类型\",\"prop\":\"type\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择物品类型\"},model:{value:(_vm.ruleForm.type),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"type\", $$v)},expression:\"ruleForm.type\"}},[_c('el-option',{attrs:{\"label\":\"书籍\",\"value\":\"book\"}}),_c('el-option',{attrs:{\"label\":\"数码产品\",\"value\":\"digital\"}})],1)],1),_c('el-form-item',{attrs:{\"label\":\"物品价格\",\"prop\":\"price\"}},[_c('el-input',{model:{value:(_vm.ruleForm.price),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"price\", $$v)},expression:\"ruleForm.price\"}})],1),_c('el-form-item',{attrs:{\"label\":\"物品图片\",\"prop\":\"images\"}},[_c('el-upload',{attrs:{\"action\":_vm.url,\"list-type\":\"picture-card\",\"on-preview\":_vm.handlePictureCardPreview,\"on-remove\":_vm.handleRemove,\"on-success\":_vm.upsuccess}},[_c('i',{staticClass:\"el-icon-plus\"})]),_c('el-dialog',{attrs:{\"visible\":_vm.dialogVisible},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('img',{attrs:{\"width\":\"100%\",\"src\":_vm.dialogImageUrl,\"alt\":\"\"}})])],1),_c('el-form-item',{attrs:{\"label\":\"物品描述\",\"prop\":\"description\"}},[_c('div',{staticStyle:{\"border\":\"1px solid #ccc\"}},[_c('Toolbar',{staticStyle:{\"border-bottom\":\"1px solid #ccc\"},attrs:{\"editor\":_vm.editor,\"defaultConfig\":_vm.toolbarConfig,\"mode\":_vm.mode}}),_c('Editor',{staticStyle:{\"height\":\"400px\",\"overflow-y\":\"hidden\"},attrs:{\"defaultConfig\":_vm.editorConfig,\"mode\":_vm.mode},on:{\"onCreated\":_vm.onCreated,\"onChange\":_vm.onChange},model:{value:(_vm.html),callback:function ($$v) {_vm.html=$$v},expression:\"html\"}})],1)]),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitForm('ruleForm')}}},[_vm._v(\"立即发布\")]),_c('el-button',{on:{\"click\":function($event){return _vm.resetForm('ruleForm')}}},[_vm._v(\"重置\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"home\">\r\n      <el-form :model=\"ruleForm\" :rules=\"rules\" ref=\"ruleForm\" label-width=\"100px\" class=\"ruledemo-Form\" size=\"mini\">\r\n        <el-form-item label=\"物品名称\" prop=\"name\">\r\n          <el-input v-model=\"ruleForm.name\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"物品类型\" prop=\"type\">\r\n          <el-select v-model=\"ruleForm.type\" placeholder=\"请选择物品类型\">\r\n            <el-option label=\"书籍\" value=\"book\"></el-option>\r\n            <el-option label=\"数码产品\" value=\"digital\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"物品价格\" prop=\"price\">\r\n          <el-input v-model=\"ruleForm.price\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"物品图片\" prop=\"images\">\r\n          <el-upload\r\n            :action=url\r\n            list-type=\"picture-card\"\r\n            :on-preview=\"handlePictureCardPreview\"\r\n            :on-remove=\"handleRemove\"\r\n            :on-success=\"upsuccess\">\r\n            <i class=\"el-icon-plus\"></i>\r\n          </el-upload>\r\n          <el-dialog :visible.sync=\"dialogVisible\">\r\n            <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\">\r\n          </el-dialog>\r\n        </el-form-item>\r\n        <el-form-item label=\"物品描述\" prop=\"description\">\r\n          <div style=\"border: 1px solid #ccc;\">\r\n            <Toolbar\r\n              style=\"border-bottom: 1px solid #ccc\"\r\n              :editor=\"editor\"\r\n              :defaultConfig=\"toolbarConfig\"\r\n              :mode=\"mode\"\r\n          />\r\n          <Editor\r\n              style=\"height: 400px; overflow-y: hidden;\"\r\n              v-model=\"html\"\r\n              :defaultConfig=\"editorConfig\"\r\n              :mode=\"mode\"\r\n              @onCreated=\"onCreated\"\r\n              @onChange=\"onChange\"\r\n          />\r\n        </div>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button type=\"primary\" @click=\"submitForm('ruleForm')\">立即发布</el-button>\r\n          <el-button @click=\"resetForm('ruleForm')\">重置</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n//   import upload from '../api/base'\r\nimport {mapState,mapMutations} from 'vuex'\r\n    import upload from '../../api/base'\r\n    import { Editor, Toolbar } from '@wangeditor/editor-for-vue'\r\n    export default {\r\n      components: { Editor, Toolbar },\r\n      computed:{\r\n        ...mapState('modules',['userinfo'])\r\n      },\r\n      data(){\r\n        return{\r\n          dialogImageUrl: '',\r\n          dialogVisible: false,\r\n          url:upload.upload,\r\n          ruleForm: {\r\n            name: '',\r\n            type: '',\r\n            price: '',\r\n            images:[],\r\n            description:'',\r\n          },\r\n          rules: {\r\n            name: [\r\n              { required: true, message: '请输入物品名称', trigger: 'blur' },\r\n              // { min: 3, max: 5, message: '长度在 3 到 5 个字符', trigger: 'blur' }\r\n            ],\r\n            type: [\r\n              { required: true, message: '请选择物品类型', trigger: 'change' }\r\n            ],\r\n            price: [\r\n              { required: true, message: '请填写商品价格', trigger: 'blur' }\r\n            ],\r\n            images: [\r\n              { required: true, message: '请上传图片', trigger: 'blur' }\r\n            ],\r\n            \r\n          },\r\n          editor: null,\r\n          html: '<p>hello</p>',\r\n          toolbarConfig: { },\r\n          editorConfig: { placeholder: '请输入内容...' },\r\n          mode: 'default', // or 'simple'\r\n        }\r\n      },\r\n      methods:{\r\n        gettime(){\r\n          let date=new Date();\r\n          let tim={\r\n            year:date.getFullYear(),\r\n            month:date.getMonth()+1,\r\n            day:date.getDate(),\r\n            hor:date.getHours(),\r\n            meu:date.getMinutes(),\r\n            sr:date.getSeconds()\r\n          }\r\n  \r\n          let newi=tim.year.toString()+tim.month.toString()+tim.day.toString()+tim.hor.toString()+tim.meu.toString()+tim.sr.toString();\r\n  \r\n          return newi;\r\n        },\r\n        onChange(editor) { \r\n          // console.log('onChange', editor.children) \r\n          this.ruleForm.description=this.html\r\n          // console.log(this.ruleForm.description);\r\n         },\r\n        onCreated(editor) {\r\n          this.editor = Object.seal(editor) // 一定要用 Object.seal() ，否则会报错\r\n          },\r\n        upsuccess(response, file, fileList){\r\n          // console.log(response, file, fileList);\r\n          let url=upload.host+'/'+ response.url.slice(7);\r\n          this.ruleForm.images.push(url)\r\n          // console.log(url);\r\n        },\r\n        handleRemove(file, fileList) {\r\n          let imgurl=file.response.url.slice(7)\r\n          console.log(file.response.url.slice(7));\r\n          this.$api.delimgt({url:imgurl})\r\n        },\r\n        handlePictureCardPreview(file) {\r\n          this.dialogImageUrl = file.url;\r\n          this.dialogVisible = true;\r\n        },\r\n        submitForm(formName) {\r\n          this.$refs[formName].validate((valid) => {\r\n            if (valid) {\r\n              console.log('添加商品',JSON.stringify(this.ruleForm.images));\r\n              let {name,type,price,images,description} = this.ruleForm\r\n              let orderid=this.gettime()\r\n              let userid=this.userinfo.user;\r\n              this.$api.addgoods({name,type,price,images :JSON.stringify(images ),description,orderid,userid:userid}).then(res=>{})\r\n              let my='/MyArticle/'+this.userinfo.user\r\n              this.$router.push(my)\r\n            } else {\r\n              console.log('error submit!!');\r\n              return false;\r\n            }\r\n          });\r\n        },\r\n        resetForm(formName) {\r\n          this.$refs[formName].resetFields();\r\n        }\r\n      },\r\n      mounted() {\r\n          // 模拟 ajax 请求，异步渲染编辑器\r\n          // setTimeout(() => {\r\n          //     this.html = '<p>模拟 Ajax 异步设置内容 HTML</p>'\r\n          // }, 1500)\r\n          console.log(this.gettime()); \r\n      },\r\n      beforeDestroy() {\r\n          const editor = this.editor\r\n          if (editor == null) return\r\n          editor.destroy() // 组件销毁时，及时销毁编辑器\r\n      }\r\n    }\r\n  </script>\r\n  <style src=\"@wangeditor/editor/dist/css/style.css\"></style>\r\n  <style lang=\"less\">\r\n     .home{\r\n      width: 900px;\r\n      height: 1000px;\r\n      margin: auto;\r\n      background-color: #fff;\r\n     }\r\n     .ruledemo-Form{\r\n      padding: 20px;\r\n     }\r\n  </style>\r\n  \r\n","import mod from \"-!../../../node_modules/_babel-loader@8.3.0@babel-loader/lib/index.js??clonedRuleSet-40.use[0]!../../../node_modules/_vue-loader@15.10.1@vue-loader/lib/index.js??vue-loader-options!./add.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_babel-loader@8.3.0@babel-loader/lib/index.js??clonedRuleSet-40.use[0]!../../../node_modules/_vue-loader@15.10.1@vue-loader/lib/index.js??vue-loader-options!./add.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./add.vue?vue&type=template&id=3a3b8b41&\"\nimport script from \"./add.vue?vue&type=script&lang=js&\"\nexport * from \"./add.vue?vue&type=script&lang=js&\"\nimport style0 from \"@wangeditor/editor/dist/css/style.css?vue&type=style&index=0&prod&lang=css&\"\nimport style1 from \"./add.vue?vue&type=style&index=1&id=3a3b8b41&prod&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.10.1@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","ref","attrs","ruleForm","rules","model","value","name","callback","$$v","$set","expression","type","price","url","handlePictureCardPreview","handleRemove","upsuccess","dialogVisible","on","$event","dialogImageUrl","staticStyle","editor","toolbarConfig","mode","editorConfig","onCreated","onChange","html","submitForm","_v","resetForm","staticRenderFns","components","Editor","Toolbar","computed","mapState","data","upload","images","description","required","message","trigger","placeholder","methods","gettime","date","Date","tim","year","getFullYear","month","getMonth","day","getDate","hor","getHours","meu","getMinutes","sr","getSeconds","newi","toString","Object","seal","response","file","fileList","host","slice","push","imgurl","console","log","$api","delimgt","formName","$refs","validate","valid","JSON","stringify","orderid","userid","userinfo","user","addgoods","then","res","my","$router","resetFields","mounted","beforeDestroy","destroy","component"],"sourceRoot":""}