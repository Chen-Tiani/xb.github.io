"use strict";(self["webpackChunkct"]=self["webpackChunkct"]||[]).push([[518],{1518:function(e,t,r){r.r(t),r.d(t,{default:function(){return c}});var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"home"},[t("el-form",{ref:"ruleForm",staticClass:"ruledemo-Form",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px",size:"mini"}},[t("el-form-item",{attrs:{label:"物品名称",prop:"name"}},[t("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),t("el-form-item",{attrs:{label:"物品类型",prop:"type"}},[t("el-select",{attrs:{placeholder:"请选择物品类型"},model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},[t("el-option",{attrs:{label:"书籍",value:"book"}}),t("el-option",{attrs:{label:"数码产品",value:"digital"}})],1)],1),t("el-form-item",{attrs:{label:"物品价格",prop:"price"}},[t("el-input",{model:{value:e.ruleForm.price,callback:function(t){e.$set(e.ruleForm,"price",t)},expression:"ruleForm.price"}})],1),t("el-form-item",{attrs:{label:"物品图片",prop:"images"}},[t("el-upload",{attrs:{action:e.url,"list-type":"picture-card","on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,"on-success":e.upsuccess}},[t("i",{staticClass:"el-icon-plus"})]),t("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1),t("el-form-item",{attrs:{label:"物品描述",prop:"description"}},[t("div",{staticStyle:{border:"1px solid #ccc"}},[t("Toolbar",{staticStyle:{"border-bottom":"1px solid #ccc"},attrs:{editor:e.editor,defaultConfig:e.toolbarConfig,mode:e.mode}}),t("Editor",{staticStyle:{height:"400px","overflow-y":"hidden"},attrs:{defaultConfig:e.editorConfig,mode:e.mode},on:{onCreated:e.onCreated,onChange:e.onChange},model:{value:e.html,callback:function(t){e.html=t},expression:"html"}})],1)]),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("立即发布")]),t("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)},l=[],i=(r(5475),r(3941)),s=r(6670),a=r(3289),n={components:{Editor:a.M,Toolbar:a.o},computed:{...(0,i.rn)("modules",["userinfo"])},data(){return{dialogImageUrl:"",dialogVisible:!1,url:s.Z.upload,ruleForm:{name:"",type:"",price:"",images:[],description:""},rules:{name:[{required:!0,message:"请输入物品名称",trigger:"blur"}],type:[{required:!0,message:"请选择物品类型",trigger:"change"}],price:[{required:!0,message:"请填写商品价格",trigger:"blur"}],images:[{required:!0,message:"请上传图片",trigger:"blur"}]},editor:null,html:"<p>hello</p>",toolbarConfig:{},editorConfig:{placeholder:"请输入内容..."},mode:"default"}},methods:{gettime(){let e=new Date,t={year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate(),hor:e.getHours(),meu:e.getMinutes(),sr:e.getSeconds()},r=t.year.toString()+t.month.toString()+t.day.toString()+t.hor.toString()+t.meu.toString()+t.sr.toString();return r},onChange(e){this.ruleForm.description=this.html},onCreated(e){this.editor=Object.seal(e)},upsuccess(e,t,r){let o=s.Z.host+"/"+e.url.slice(7);this.ruleForm.images.push(o)},handleRemove(e,t){let r=e.response.url.slice(7);console.log(e.response.url.slice(7)),this.$api.delimgt({url:r})},handlePictureCardPreview(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},submitForm(e){this.$refs[e].validate((e=>{if(!e)return console.log("error submit!!"),!1;{console.log("添加商品",JSON.stringify(this.ruleForm.images));let{name:e,type:t,price:r,images:o,description:l}=this.ruleForm,i=this.gettime(),s=this.userinfo.user;this.$api.addgoods({name:e,type:t,price:r,images:JSON.stringify(o),description:l,orderid:i,userid:s}).then((e=>{}));let a="/MyArticle/"+this.userinfo.user;this.$router.push(a)}}))},resetForm(e){this.$refs[e].resetFields()}},mounted(){console.log(this.gettime())},beforeDestroy(){const e=this.editor;null!=e&&e.destroy()}},u=n,m=r(8412),d=(0,m.Z)(u,o,l,!1,null,null,null),c=d.exports}}]);
//# sourceMappingURL=518.5a5c4887.js.map