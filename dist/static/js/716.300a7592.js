"use strict";(self["webpackChunkct"]=self["webpackChunkct"]||[]).push([[716],{9716:function(e,r,t){t.r(r),t.d(r,{default:function(){return w}});var o=function(){var e=this,r=e._self._c;return r("div",{staticClass:"home"},[r("div",{staticClass:"login"},[r("h2",[e._v("登录")]),r("div",[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"用户名",prop:"id"}},[r("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.ruleForm.id,callback:function(r){e.$set(e.ruleForm,"id",r)},expression:"ruleForm.id"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm.password,callback:function(r){e.$set(e.ruleForm,"password",r)},expression:"ruleForm.password"}})],1),r("el-form-item",{attrs:{label:"验证码",prop:"mode"}},[r("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm.mode,callback:function(r){e.$set(e.ruleForm,"mode",r)},expression:"ruleForm.mode"}})],1),r("div",{staticStyle:{"text-align":"center"},attrs:{id:"wwe"}},[e._v(" "+e._s(e.mm)+" ")]),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.submitForm("ruleForm")}}},[e._v("提交")]),r("el-button",{on:{click:function(r){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)])])},s=[];t(5475);function a(e){this.message=e}a.prototype=new Error,a.prototype.name="InvalidCharacterError";var i="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var r=String(e).replace(/=+$/,"");if(r.length%4==1)throw new a("'atob' failed: The string to be decoded is not correctly encoded.");for(var t,o,s=0,i=0,l="";o=r.charAt(i++);~o&&(t=s%4?64*t+o:o,s++%4)?l+=String.fromCharCode(255&t>>(-2*s&6)):0)o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(o);return l};function l(e){var r=e.replace(/-/g,"+").replace(/_/g,"/");switch(r.length%4){case 0:break;case 2:r+="==";break;case 3:r+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(i(e).replace(/(.)/g,(function(e,r){var t=r.charCodeAt(0).toString(16).toUpperCase();return t.length<2&&(t="0"+t),"%"+t})))}(r)}catch(e){return i(r)}}function n(e){this.message=e}function u(e,r){if("string"!=typeof e)throw new n("Invalid token specified");var t=!0===(r=r||{}).header?0:1;try{return JSON.parse(l(e.split(".")[t]))}catch(e){throw new n("Invalid token specified: "+e.message)}}n.prototype=new Error,n.prototype.name="InvalidTokenError";var d=u,m=t(3941),c={mounted(){this.piw()},computed:{},data(){var e=(e,r,t)=>{""===r?t(new Error("请输入用户名")):t()},r=(e,r,t)=>{""===r?t(new Error("请输入密码")):t()};return{mm:"",ruleForm:{password:"",id:"",mode:""},rules:{id:[{validator:e,trigger:"blur"}],password:[{validator:r,trigger:"blur"}],mode:[{validator:r,trigger:"blur"}]}}},methods:{...(0,m.OI)("modules",["setUser"]),piw(){for(var e=6,r="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",t=r.length,o="",s=0;s<e;s++)o+=r.charAt(Math.floor(Math.random()*t));this.mm=o,console.log(this.mm)},submitForm(e){this.$refs[e].validate((e=>{if(!e)return console.log("error submit!!"),!1;{let{id:e,password:r}=this.ruleForm;this.$api.getlogin({id:e,password:r}).then((e=>{if(console.log("--------",e.data),200===e.data.status&&this.ruleForm.mode==this.mm){let r={user:d(e.data.data).id,token:e.data.data};this.setUser(r),sessionStorage.setItem("user",JSON.stringify(r)),this.$router.push("/"),this.$message({showClose:!0,message:"恭喜你,登录成功",type:"success"}),location.reload()}else this.ruleForm.mode!=this.mm?(this.piw(),this.$message({showClose:!0,message:"抱歉，验证码错误",type:"error"})):(console.log("错误"),this.piw(),this.$message({showClose:!0,message:"抱歉，账号或密码错误",type:"error"}))}))}}))},resetForm(e){this.$refs[e].resetFields()}}},p=c,h=t(8412),f=(0,h.Z)(p,o,s,!1,null,null,null),w=f.exports}}]);
//# sourceMappingURL=716.300a7592.js.map